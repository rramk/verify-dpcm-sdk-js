<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Privacy - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ConfigurationError.html">ConfigurationError</a></li><li><a href="module-Privacy-Privacy.html">Privacy</a><ul class='methods'><li data-type='method'><a href="module-Privacy-Privacy.html#assess">assess</a></li><li data-type='method'><a href="module-Privacy-Privacy.html#getConsentMetadata">getConsentMetadata</a></li><li data-type='method'><a href="module-Privacy-Privacy.html#getUserConsents">getUserConsents</a></li><li data-type='method'><a href="module-Privacy-Privacy.html#storeConsents">storeConsents</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-Privacy.html">Privacy</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<div id="main">
    
    <h1 class="page-title">Privacy</h1>
    

    




<section>

<header>
    
        <h2>
            <span class="ancestors"><a href="module-Privacy.html">Privacy</a>~</span>
        
        Privacy
        </h2>
        
            <div class="class-description usertext"><p>Class representing the Privacy SDK for IBM Security Verify. Used to
perform privacy assessment for attributes being requested and metadata
required to build consent experiences.</p></div>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="Privacy"><span class="type-signature"></span>new Privacy<span class="signature">(config, auth, context)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="privacy.js.html">privacy.js</a>, <a href="privacy.js.html#line18">line 18</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>Vivek Shankar</li>
        </ul>
    </dd>
    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Create a new <code>Privacy</code> object.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const Privacy = require('verify-dpcm-sdk-js');
const client = new Privacy({
  "tenantUrl": "https://abc.verify.ibm.com"
}, {
  "accessToken": "lasfjsdlfjsldjfglsdjfglsjl"
}, {
  "ipAddress": "1.2.3.4"
});</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>config</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Global configuration for the SDK</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>tenantUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The Verify tenant hostname, including
the protocol.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>auth</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Auth object contains property values to authorize
requests to Verify</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>accessToken</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The OAuth 2.0 token used to authorize
requests. If the access token is generated using a privileged API client
(as opposed to one generated on a user authentication flow), the
<code>context.subjectId</code> is required.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>context</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Context object contains Privacy SDK specific
context</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>subjectId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The user/subject identifier that may be
a Verify user identifier.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>isExternalSubject</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last"><p>Indicates if the subject is
known to Verify.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ipAddress</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The IP address of the user agent. If this
library is used in a backend system, this IP should be obtained from the
request headers that contain the actual user agent IP address.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>



















        
        </div>
    

    

    

    
    
    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id=".ConsentDisplayTypes"><span class="type-signature">(static, readonly) </span>ConsentDisplayTypes<span class="type-signature"> :<a href="global.html#ConsentDisplayTypesEnum">ConsentDisplayTypesEnum</a></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="privacy.js.html">privacy.js</a>, <a href="privacy.js.html#line357">line 357</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>



    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>DO_NOT_SHOW</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#ConsentDisplayTypesEnum">ConsentDisplayTypesEnum</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>TRANSPARENT</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#ConsentDisplayTypesEnum">ConsentDisplayTypesEnum</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>OPTIN_OR_OUT</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#ConsentDisplayTypesEnum">ConsentDisplayTypesEnum</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ALLOW_OR_DENY</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#ConsentDisplayTypesEnum">ConsentDisplayTypesEnum</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<div class="description usertext">
    <p>Enumeration of different possible consent display types</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="global.html#ConsentDisplayTypesEnum">ConsentDisplayTypesEnum</a></span>


        </li>
    </ul>






        
            
<h4 class="name" id=".ConsentTypes"><span class="type-signature">(static, readonly) </span>ConsentTypes<span class="type-signature"> :<a href="global.html#ConsentTypesEnum">ConsentTypesEnum</a></span></h4>





<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="privacy.js.html">privacy.js</a>, <a href="privacy.js.html#line369">line 369</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>



    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ALLOW</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#ConsentTypesEnum">ConsentTypesEnum</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>DENY</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#ConsentTypesEnum">ConsentTypesEnum</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>OPTIN</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#ConsentTypesEnum">ConsentTypesEnum</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>OPTOUT</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#ConsentTypesEnum">ConsentTypesEnum</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>TRANSPARENT</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#ConsentTypesEnum">ConsentTypesEnum</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<div class="description usertext">
    <p>Enumeration of different possible consent types</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="global.html#ConsentTypesEnum">ConsentTypesEnum</a></span>


        </li>
    </ul>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="assess"><span class="type-signature">(async) </span>assess<span class="signature">(items)</span><span class="type-signature"> &rarr; {Promise.&lt;<a href="global.html#WrappedAssessment">WrappedAssessment</a>>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="privacy.js.html">privacy.js</a>, <a href="privacy.js.html#line116">line 116</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Evaluate the attributes requested for approval.</p>
<p>Request the consent management system to approve the use of attributes
for the specified purpose, access type and an optional value. If the
access type is not specified, it is set to a system default.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>let r = await client.assess([
  {
    // allow mobile number for marketing
    "purposeId": "marketing",
    "attributeId": "11", // mobile_number
    "accessTypeId": "default"
  },
  {
    // default end user license agreement
    "purposeId": "defaultEULA",
  }
])

if (r.status == "consent") {
  // redirect for consent or build the page here
  // and render. consider filtering out items
  // in the assessment that are not approved because
  // of a rule violation
} else if (r.status == "approved") {
  // the world is your oyster. go forth and conquer
} else {
  // examine the assessment and show an appropriate error
}</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>items</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>The data items that require approval for use</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>purposeId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The purpose ID representing the privacy
purpose configured on Verify. If you are checking for the consent status
of EULA, use the EULA identifier here.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>accessTypeId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The access type ID representing the
available access types on Verify. This must be one of the access types
selected for the purpose.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>attributeId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The attribute ID on Verify. This must be
configured as one of the attributes for the purpose. This may be optional
if no attributes are configured for the purpose.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>attributeValue</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The attribute value for the attribute.
This is typically used when the user has more than one value for the
attribute. This is optional.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The status of the assessment
and additional details</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;<a href="global.html#WrappedAssessment">WrappedAssessment</a>></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="getConsentMetadata"><span class="type-signature">(async) </span>getConsentMetadata<span class="signature">(items)</span><span class="type-signature"> &rarr; {Promise.&lt;<a href="global.html#WrappedMetadata">WrappedMetadata</a>>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="privacy.js.html">privacy.js</a>, <a href="privacy.js.html#line229">line 229</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Get consent metadata that can be used to build the consent page presented
to the data subject/user, including the current state of consent.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>let r = await client.getConsentMetadata([
  {
    // allow mobile number for marketing
    "purposeId": "marketing",
    "attributeId": "11", // mobile_number
    "accessTypeId": "default"
  },
  {
    // default end user license agreement
    "purposeId": "defaultEULA",
  }
])

if (r.status == "done") {
  // render the page based on the r.metadata
}</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>items</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>The data items that require approval for use</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>purposeId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The purpose ID representing the privacy
purpose configured on Verify. If you are checking for the consent status
of EULA, use the EULA identifier here.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>accessTypeId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The access type ID representing the
available access types on Verify. This must be one of the access types
selected for the purpose. If this is not provided in the input, it is
defaulted to 'default'. Wildcards are not allowed.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>attributeId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The attribute ID on Verify. This must be
configured as one of the attributes for the purpose. This may be optional
if no attributes are configured for the purpose. Wildcards are not allowed.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The status of the request
and any consent metadata</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;<a href="global.html#WrappedMetadata">WrappedMetadata</a>></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="getUserConsents"><span class="type-signature">(async) </span>getUserConsents<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;<a href="global.html#WrappedGetUserConsents">WrappedGetUserConsents</a>>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="privacy.js.html">privacy.js</a>, <a href="privacy.js.html#line282">line 282</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Fetches user consents.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>let r = await client.getUserConsents()
if (r.status == "done") {
  // render the page based on the r.consents
}</code></pre>


















<h5>Returns:</h5>

        


<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;<a href="global.html#WrappedGetUserConsents">WrappedGetUserConsents</a>></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="storeConsents"><span class="type-signature">(async) </span>storeConsents<span class="signature">(consents)</span><span class="type-signature"> &rarr; {Promise.&lt;<a href="global.html#WrappedStoreUserConsents">WrappedStoreUserConsents</a>>}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="privacy.js.html">privacy.js</a>, <a href="privacy.js.html#line329">line 329</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    <p>Store consents for the user.
<br><br>Consents may only be created typically, except if the consent
end time needs to be updated. Only 10 consent operations are allowed
at a time.</p>
</div>









    <h5>Example</h5>
    
    <pre class="prettyprint"><code>let r = await client.storeConsents([
  {
    "purposeId": "marketing",
    "attributeId": "mobile_number",
    "state": 3 // opt-in
  }
])

if (r.status == "success") {
  // Warp 11... engage
} else {
  // loop through the r.results to determine what failed and why
}</code></pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>consents</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;<a href="global.html#Consent">Consent</a>></span>


            
            </td>

            

            

            <td class="description last"><p>The full consent records that need to be
created or updated</p></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Consent operation response</p>
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;<a href="global.html#WrappedStoreUserConsents">WrappedStoreUserConsents</a>></span>


    </dd>
</dl>

    



        
    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>